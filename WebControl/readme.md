<!--
 * @Author: wds2dxh wdsnpshy@163.com
 * @Date: 2025-02-23 16:55:18
 * @Description: 
 * Copyright (c) 2025 by ${wds2dxh}, All Rights Reserved. 
-->
# é€šç”¨åº•ç›˜æ§åˆ¶ç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹
é€šç”¨åº•ç›˜æ§åˆ¶ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäº Web çš„è¿œç¨‹æ§åˆ¶å¹³å°ï¼Œæ”¯æŒå¤šè®¾å¤‡ç®¡ç†ï¼Œæä¾›å®æ—¶è§†é¢‘æµå’ŒåŒæ‘‡æ†æ§åˆ¶ç•Œé¢ï¼Œé€‚ç”¨äºå„ç±»ç§»åŠ¨æœºå™¨äººåº•ç›˜çš„è¿œç¨‹æ“æ§ã€‚

### ä¸»è¦ç‰¹æ€§
- ğŸ® åŒæ‘‡æ†æ§åˆ¶ç•Œé¢
  - å·¦æ‘‡æ†ï¼šæ§åˆ¶çº¿é€Ÿåº¦ï¼ˆå‰è¿›/åé€€ï¼‰
  - å³æ‘‡æ†ï¼šæ§åˆ¶è§’é€Ÿåº¦ï¼ˆå·¦è½¬/å³è½¬ï¼‰
- ğŸ“¹ å®æ—¶è§†é¢‘æµæ˜¾ç¤º
- ğŸ” å¤šè®¾å¤‡æ”¯æŒï¼ˆåŸºäºè®¾å¤‡IDï¼‰
- ğŸ“± ç§»åŠ¨ç«¯å‹å¥½çš„å“åº”å¼è®¾è®¡
- âš¡ ä½å»¶è¿Ÿçš„æ§åˆ¶å“åº”
- ğŸ”„ MQTT é€šä¿¡ä¿è¯å¯é æ€§

## ç³»ç»Ÿç•Œé¢

![é€šç”¨åº•ç›˜æ§åˆ¶ç³»ç»Ÿç•Œé¢](docs/images/web.JPG)

*ç³»ç»Ÿæ§åˆ¶ç•Œé¢å±•ç¤ºäº†è§†é¢‘æµåŒºåŸŸã€çŠ¶æ€æ˜¾ç¤ºã€å‚æ•°è®¾ç½®æ»‘å—å’ŒåŒæ‘‡æ†æ§åˆ¶*

## æŠ€æœ¯æ ˆ
- å‰ç«¯ï¼šHTML5, CSS3, JavaScript, nipplejs
- åç«¯ï¼šNode.js, Express
- é€šä¿¡ï¼šMQTT, WebSocket

## å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚
- Node.js >= 14.0.0
- npm >= 6.0.0
- MQTT Broker (å¦‚ EMQX, Mosquitto)

### å®‰è£…æ­¥éª¤
1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/yourusername/universal-chassis-control.git
cd universal-chassis-control
```

2. å®‰è£…ä¾èµ–
```bash
npm install
```

3. é…ç½®ç³»ç»Ÿ
ç¼–è¾‘ `config.js` æ–‡ä»¶ï¼Œè®¾ç½®ï¼š
- MQTT æœåŠ¡å™¨ä¿¡æ¯
- è§†é¢‘æµ URL
- è®¾å¤‡è®¤è¯ä¿¡æ¯

4. å¯åŠ¨æœåŠ¡å™¨
```bash
# å¼€å‘æ¨¡å¼ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

### é…ç½®è¯´æ˜

#### MQTT ä¸»é¢˜æ ¼å¼
- æ§åˆ¶æŒ‡ä»¤ä¸»é¢˜ï¼š`CarControl_<è®¾å¤‡ID>`
- çŠ¶æ€ä¿¡æ¯ä¸»é¢˜ï¼š`CarStatus_<è®¾å¤‡ID>`

ç¤ºä¾‹ï¼šè®¾å¤‡IDä¸º "001" æ—¶
- æ§åˆ¶ä¸»é¢˜ï¼š`CarControl_001`
- çŠ¶æ€ä¸»é¢˜ï¼š`CarStatus_001`

#### è®¾å¤‡è®¤è¯
- è®¾å¤‡IDï¼š3ä½æ•°å­—ï¼ˆä¾‹å¦‚ï¼š001, 002, ...ï¼‰
- é»˜è®¤å¯†ç ï¼š88888888

## ä½¿ç”¨è¯´æ˜

1. è®¿é—®ç³»ç»Ÿ
   - æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® `http://localhost:3000`
   - è¾“å…¥è®¾å¤‡IDå’Œå¯†ç ç™»å½•

2. æ§åˆ¶ç•Œé¢
   - å·¦ä¾§æ‘‡æ†ï¼šä¸Šä¸‹ç§»åŠ¨æ§åˆ¶å‰è¿›/åé€€
   - å³ä¾§æ‘‡æ†ï¼šå·¦å³ç§»åŠ¨æ§åˆ¶è½¬å‘
   - æ»‘å—æ§åˆ¶ï¼šè°ƒæ•´æœ€å¤§é€Ÿåº¦ã€æœ€å¤§è§’é€Ÿåº¦å’ŒåŠ é€Ÿåº¦

3. è§†é¢‘æ˜¾ç¤º
   - å®æ—¶æ˜¾ç¤ºè®¾å¤‡æ‘„åƒå¤´ç”»é¢

## æ§åˆ¶åè®®

### æ§åˆ¶æŒ‡ä»¤æ ¼å¼
```javascript
{
    command: "speed",
    vx: Number,     // çº¿é€Ÿåº¦ (-max_speed åˆ° +max_speed)
    vy: 0.0,        // æ¨ªå‘é€Ÿåº¦ï¼ˆå½“å‰ç‰ˆæœ¬æœªä½¿ç”¨ï¼‰
    omega: Number,  // è§’é€Ÿåº¦ (-max_omega åˆ° +max_omega)
    acceleration: Number  // åŠ é€Ÿåº¦
}
```

### åœæ­¢å‘½ä»¤
```javascript
{
    command: "stop"
}
```

## éƒ¨ç½²æŒ‡å—

### å¼€å‘ç¯å¢ƒ
ä½¿ç”¨ nodemon å®ç°çƒ­é‡è½½ï¼š
```bash
npm run dev
```

### ç”Ÿäº§ç¯å¢ƒ
æ¨èä½¿ç”¨ PM2 è¿›è¡Œè¿›ç¨‹ç®¡ç†ï¼š
```bash
# å®‰è£… PM2
npm install -g pm2

# å¯åŠ¨åº”ç”¨
npm run pm2:start

# æŸ¥çœ‹æ—¥å¿—
npm run pm2:logs
```

### å®‰å…¨å»ºè®®
1. ä¿®æ”¹é»˜è®¤å¯†ç 
2. å¯ç”¨ HTTPS
3. é…ç½®é˜²ç«å¢™
4. ä½¿ç”¨åå‘ä»£ç†ï¼ˆå¦‚ Nginxï¼‰

## é¡¹ç›®ç»“æ„
```
universal-chassis-control/
â”œâ”€â”€ config.js         # é…ç½®æ–‡ä»¶
â”œâ”€â”€ server.js         # æœåŠ¡å™¨å…¥å£
â”œâ”€â”€ control.html      # æ§åˆ¶é¡µé¢
â”œâ”€â”€ index.html        # ç™»å½•é¡µé¢
â”œâ”€â”€ package.json      # é¡¹ç›®é…ç½®
â””â”€â”€ README.md         # è¯´æ˜æ–‡æ¡£
```

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨Apache License 2.0è®¸å¯è¯ - è¯¦æƒ…è¯·å‚è§[LICENSE](../LICENSE)æ–‡ä»¶

## ä½œè€…

wds2dxh (wdsnpshy@163.com)